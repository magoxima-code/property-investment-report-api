<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Property Report Builder</title>
<style>
 body{font-family:system-ui,Arial,sans-serif;background:#f8fafc;color:#0f172a;padding:24px}
 .card{background:#fff;border:1px solid #e2e8f0;border-radius:14px;padding:16px;max-width:720px;margin:auto;box-shadow:0 1px 4px rgba(0,0,0,.04)}
 label{font-size:12px;color:#475569;display:block;margin:10px 0 4px}
 input,button{font-size:14px} input{width:100%;padding:10px;border:1px solid #cbd5e1;border-radius:10px}
 button{margin-top:12px;background:#4f46e5;color:#fff;border:0;border-radius:10px;padding:10px 14px;cursor:pointer}
 pre{background:#0b1220;color:#d1e3ff;padding:12px;border-radius:10px;overflow:auto}
</style></head><body>
<div class="card">
  <h2>Property Report Builder</h2>
  <form id="f">
    <label>Property Address</label>
    <input id="addr" placeholder="111/113 Cultural Park Blvd S, Cape Coral, FL 33990" required />
    <label>Purchase Price (USD)</label>
    <input id="price" placeholder="500000" />
    <label>Overrides (optional)</label>
    <input id="over" placeholder="self-managed; rate 7.6%; down 25%" />
    <button type="submit">Generate</button>
  </form>
  <h3>Response</h3>
  <pre id="out">(waiting)</pre>
</div>
<script>
document.getElementById('f').addEventListener('submit', async (e) => {
  e.preventDefault();
  const address = document.getElementById('addr').value.trim();
  const purchasePrice = Number((document.getElementById('price').value||'').replace(/[$,\s]/g,'')) || undefined;
  const overrides = document.getElementById('over').value.trim() || undefined;
  const out = document.getElementById('out'); out.textContent='Loading...';
  try {
    const r = await fetch('/api/generate', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ address, purchasePrice, overrides })
    });
    const data = await r.json();
    out.textContent = JSON.stringify(data, null, 2);
  } catch (err) { out.textContent = String(err); }
});
</script>
</body></html>
